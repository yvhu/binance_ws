# Binance Futures Configuration
[binance]
# Trading pairs to monitor (Futures)
# Currently focused on BTC only for production trading
# To add more symbols for future expansion, simply add them to the list:
# symbols = ["BTCUSDC", "ETHUSDC", "BNBUSDC", "SOLUSDC"]
symbols = ["BTCUSDC"]
# WebSocket streams (Futures)
streams = ["ticker", "kline_5m"]
# Reconnection settings
reconnect_attempts = 5
reconnect_delay = 5  # seconds
# Futures type: 'perpetual' for perpetual futures
futures_type = "perpetual"

# Telegram Configuration
[telegram]
# Message settings
enable_notifications = true
message_timeout = 30  # seconds
# Rate limiting
max_messages_per_minute = 20

# Technical Indicators Configuration
[indicators]
# Moving Averages
ma_periods = [7, 25, 99]
# RSI
rsi_period = 14
rsi_overbought = 70
rsi_oversold = 30
# MACD
macd_fast = 12
macd_slow = 26
macd_signal = 9
# Bollinger Bands
bb_period = 20
bb_std = 2

# Trading Strategy Configuration
[strategy]
# 5m K线交易策略
# Position size: 100% of account balance (full position)

# K线 intervals for strategy
check_interval = "5m"  # Check interval for opening position

# Volume check parameters
volume_ratio_threshold = 0.80  # Minimum volume ratio (current volume / average volume of last 5 klines)

# K-line body ratio check parameters
body_ratio_threshold = 0.5  # Minimum body ratio (body / range), filters klines with too much resistance
shadow_ratio_threshold = 0.5  # Maximum shadow ratio (shadow / range), prevents single-sided shadows from being too long

# K-line range check parameters
range_ratio_threshold = 0.5  # Minimum range ratio (current range / average range of last 5 klines), ensures sufficient volatility

# Stop loss parameters
stop_loss_range_multiplier = 0.8  # Moving stop loss distance = latest 5m K-line range * this multiplier
stop_loss_min_distance_percent = 0.025  # Minimum stop loss distance as percentage of price (2.5% = 0.025) - 平衡型配置
stop_loss_max_distance_percent = 0.03  # Maximum stop loss distance as percentage of price (3% = 0.03) - 防止止损距离过大
engulfing_body_ratio_threshold = 0.85  # Minimum engulfing body ratio to trigger stop loss (85% = less sensitive)

# Real-time stop loss optimization parameters (实时止损优化参数)
# 优化后的配置，减少误触发同时保持及时止损
stop_loss_price_buffer_percent = 0.002  # Price buffer to avoid false triggers (0.2% = 0.002) - 优化后配置
stop_loss_time_threshold = 5  # Time threshold in seconds to confirm stop loss trigger (5 seconds) - 优化后配置
stop_loss_check_interval = 1  # Check interval in seconds (1 second)

# Trailing stop loss parameters (移动止损参数)
trailing_stop_enabled = false  # Enable trailing stop loss (移动止损开关) - 禁用移动止损，避免与实时监控止损冲突
trailing_stop_kline_count = 5  # Number of recent klines to use for trailing stop (使用最近N根K线的最低/最高点) - 增加到5根K线

# Take profit parameters (止盈参数)
# 平衡型配置：止损2.5%，止盈3.5%，风险/收益比1:1.4，适合5分钟K线周期
take_profit_enabled = true  # Enable take profit (止盈开关)
take_profit_percent = 0.035  # Take profit threshold as percentage of entry price (3.5% = 0.035) - 平衡型配置
take_profit_trailing_enabled = true  # Enable trailing take profit after reaching take profit (移动止盈开关)
take_profit_trailing_percent = 0.015  # Trailing take profit threshold (1.5% = 0.015) - 达到止盈后，价格回撤1.5%才平仓

# Trend filter parameters (to avoid false breakouts in sideways markets)
trend_filter_enabled = true  # Enable trend filter to avoid false breakouts
trend_filter_ma_period = 20  # MA period for trend filter (default: 20)
# Trend filter logic:
# - For LONG: price must be ABOVE MA20 AND MA20 must be trending UP
# - For SHORT: price must be BELOW MA20 AND MA20 must be trending DOWN
# This helps avoid false breakouts in sideways markets

# Trading Configuration
[trading]
# Fee rate (0.0002 = 0.02%, 0.0004 = 0.04%)
# Binance futures default fee: 0.02% (maker) / 0.04% (taker)
# Using taker fee for market orders
fee_rate = 0.0004  # 0.04% for market orders

# Safety margin (extra buffer to ensure order can be filled)
# 0.01 = 1% extra margin
safety_margin = 0.01  # 1% safety margin

# Risk Management
# Maximum loss per trade as percentage of account balance
# This limits the position size based on stop loss distance
# Example: With 30% max loss and 0.5% stop loss distance, position size = 60x leverage
max_loss_per_trade_percent = 0.30  # 30% maximum loss per trade

# Logging Configuration
[logging]
level = "INFO"
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
file = "logs/app.log"
max_bytes = 10485760  # 10MB
backup_count = 5